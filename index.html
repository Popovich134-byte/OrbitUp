<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Gaming Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        body { background: #050505; color: #fff; font-family: 'Inter', sans-serif; }
        .neon-text { text-shadow: 0 0 10px #39FF14; color: #39FF14; font-family: 'Orbitron', sans-serif; }
        .neon-btn { box-shadow: 0 0 15px rgba(57, 255, 20, 0.3); transition: 0.3s; }
        .neon-btn:disabled { opacity: 0.5; box-shadow: none; filter: grayscale(1); }
        #crashCanvas { width: 100%; height: 180px; background: #000; border-radius: 12px; border: 1px solid #1a1a1a; }
        .history-item { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(-10px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
</head>
<body class="p-4 pb-24">

    <div class="flex justify-between items-center mb-6">
        <div>
            <h1 class="text-[10px] text-gray-500 uppercase tracking-widest">My Assets</h1>
            <div class="flex items-center gap-2">
                <span class="text-2xl font-bold neon-text" id="balanceDisplay">2.00</span>
                <span class="text-xs text-gray-400">STARS</span>
            </div>
        </div>
        <div class="bg-[#111] p-2 rounded-lg border border-gray-800 text-[10px] text-center">
            <p class="text-gray-500">BONUS ACTIVE</p>
            <p class="text-[#39FF14]">+10% Daily</p>
        </div>
    </div>

    <div class="bg-[#0f0f0f] rounded-2xl p-4 border border-gray-800 mb-6">
        <div class="relative mb-4">
            <canvas id="crashCanvas"></canvas>
            <div id="multiplier" class="absolute inset-0 flex flex-col items-center justify-center">
                <span class="text-4xl font-black neon-text" id="multText">1.00x</span>
                <span id="statusText" class="text-[10px] uppercase tracking-widest text-gray-500">Waiting for bet...</span>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-black p-2 rounded-xl border border-gray-800">
                <p class="text-[10px] text-gray-500 mb-1 ml-1">BET AMOUNT</p>
                <input id="betInput" type="number" value="0.5" step="0.1" min="0.1" 
                    class="bg-transparent w-full text-lg font-bold outline-none text-white px-1">
            </div>
            <button onclick="handleAction()" id="actionBtn" 
                class="bg-[#39FF14] text-black font-bold rounded-xl uppercase neon-btn">
                Place Bet
            </button>
        </div>
    </div>

    <div>
        <h3 class="text-xs font-bold text-gray-500 uppercase mb-3">Live History</h3>
        <div id="historyList" class="flex gap-2 overflow-x-auto pb-2">
            </div>
    </div>

    <script>
        // --- State ---
        let balance = 2.00;
        let currentBet = 0;
        let isGaming = false;
        let gameInterval = null;
        let currentMultiplier = 1.00;
        let hasCashedOut = false;

        const balanceDisplay = document.getElementById('balanceDisplay');
        const multText = document.getElementById('multText');
        const statusText = document.getElementById('statusText');
        const actionBtn = document.getElementById('actionBtn');
        const betInput = document.getElementById('betInput');
        const historyList = document.getElementById('historyList');

        // --- Logic ---

        function updateBalance(amount) {
            balance = parseFloat((balance + amount).toFixed(2));
            balanceDisplay.innerText = balance.toFixed(2);
        }

        function handleAction() {
            if (!isGaming) {
                startNewGame();
            } else if (!hasCashedOut) {
                cashOut();
            }
        }

        function startNewGame() {
            const betValue = parseFloat(betInput.value);
            
            if (betValue > balance) {
                alert("Not enough Stars!");
                return;
            }
            if (betValue <= 0) return;

            // Занимаем ставку
            currentBet = betValue;
            updateBalance(-currentBet);
            
            // Сброс состояния
            isGaming = true;
            hasCashedOut = false;
            currentMultiplier = 1.00;
            const crashPoint = (Math.random() * 3.5 + 1.01); // Рандом для демо

            actionBtn.innerText = "Cash Out";
            actionBtn.classList.replace('bg-[#39FF14]', 'bg-white');
            statusText.innerText = "Game in progress...";
            
            gameInterval = setInterval(() => {
                currentMultiplier += 0.01;
                multText.innerText = currentMultiplier.toFixed(2) + 'x';
                
                if (currentMultiplier >= crashPoint) {
                    endGame(false);
                }
            }, 60);
        }

        function cashOut() {
            if (hasCashedOut) return;
            
            const winAmount = currentBet * currentMultiplier;
            updateBalance(winAmount);
            hasCashedOut = true;
            
            actionBtn.disabled = true;
            actionBtn.innerText = "WIN: +" + winAmount.toFixed(2);
            statusText.innerText = "Profit Secured!";
            addToHistory(currentMultiplier.toFixed(2), true);
        }

        function endGame(wasCashedOut) {
            clearInterval(gameInterval);
            isGaming = false;
            
            if (!hasCashedOut) {
                multText.classList.add('text-red-600');
                statusText.innerText = "Crashed!";
                addToHistory(currentMultiplier.toFixed(2), false);
                actionBtn.innerText = "Busted!";
                actionBtn.classList.replace('bg-white', 'bg-red-600');
            }

            setTimeout(() => {
                resetUI();
            }, 2000);
        }

        function resetUI() {
            multText.innerText = "1.00x";
            multText.classList.remove('text-red-600');
            statusText.innerText = "Waiting for bet...";
            actionBtn.disabled = false;
            actionBtn.innerText = "Place Bet";
            actionBtn.className = "bg-[#39FF14] text-black font-bold rounded-xl uppercase neon-btn";
        }

        function addToHistory(val, win) {
            const item = document.createElement('div');
            item.className = `history-item px-3 py-1 rounded-full text-[10px] font-bold border ${win ? 'border-[#39FF14] text-[#39FF14]' : 'border-red-600 text-red-600'} bg-black`;
            item.innerText = val + 'x';
            historyList.prepend(item);
        }

        // --- Canvas Visual (Simplified) ---
        const canvas = document.getElementById('crashCanvas');
        const ctx = canvas.getContext('2d');
        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            if(isGaming) {
                ctx.strokeStyle = '#39FF14';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(0, 180);
                ctx.quadraticCurveTo(canvas.width/2, 180, canvas.width, 180 - (currentMultiplier * 20));
                ctx.stroke();
            }
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
