<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>OrbitUp | Original Neon</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000; color: #39FF14; font-family: sans-serif; overflow-x: hidden; touch-action: manipulation; }
        .neon-border { border: 1px solid #39FF14; box-shadow: 0 0 10px rgba(57, 255, 20, 0.4); }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
        .page { display: none; }
        .page.active { display: block; }
        #crash-canvas { width: 100%; height: 180px; border-radius: 15px; background: #080808; }
        .anim-spin { animation: spin 0.5s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="p-4">

    <div id="splash" class="fixed inset-0 z-50 bg-black flex flex-col items-center justify-center">
        <h1 style="text-shadow: 0 0 20px #39FF14" class="text-4xl font-black italic mb-2">ORBIT UP</h1>
        <div class="w-10 h-1 bg-[#39FF14] animate-pulse"></div>
    </div>

    <div id="lang-page" class="page fixed inset-0 bg-black flex flex-col items-center justify-center p-6">
        <h2 class="text-xl mb-8 font-bold uppercase tracking-widest">Select Language</h2>
        <button onclick="init('ru')" class="w-full glass neon-border p-5 rounded-2xl mb-4 font-bold">–†–£–°–°–ö–ò–ô</button>
        <button onclick="init('en')" class="w-full glass neon-border p-5 rounded-2xl font-bold">ENGLISH</button>
    </div>

    <div id="main-app" class="page">
        <div class="flex justify-between items-center mb-6">
            <span id="user-name" class="font-bold text-lg">LOADING...</span>
            <div class="glass neon-border px-4 py-1 rounded-full text-sm font-black">‚≠ê <span id="balance">1000</span></div>
        </div>

        <div class="glass neon-border rounded-3xl p-5 mb-6">
            <div class="flex justify-between mb-2">
                <span class="text-[10px] font-bold opacity-50 uppercase">Crash Game</span>
                <span id="mult" class="text-2xl font-black">1.00x</span>
            </div>
            <canvas id="crash-canvas"></canvas>
            <div class="flex gap-2 mt-4">
                <input id="bet-input" type="number" value="10" class="w-1/2 bg-white/10 rounded-xl px-4 text-white outline-none">
                <button id="btn-bet" onclick="startBet()" class="w-1/2 bg-[#39FF14] text-black font-bold py-3 rounded-xl uppercase">–°—Ç–∞–≤–∫–∞</button>
                <button id="btn-cash" onclick="takeWin()" class="hidden w-1/2 bg-white text-black font-bold py-3 rounded-xl uppercase tracking-tighter">–ó–∞–±—Ä–∞—Ç—å</button>
            </div>
        </div>

        <h3 class="text-xs font-bold mb-3 opacity-50 uppercase">–ö–µ–π—Å—ã</h3>
        <div class="grid grid-cols-2 gap-4 mb-8">
            <div class="glass p-4 rounded-2xl text-center border border-white/10">
                <div id="case-1-icon" class="text-4xl mb-2 text-white">üì¶</div>
                <div class="text-[10px] font-bold mb-2">NEON BOX</div>
                <button onclick="openCase(50, 'case-1')" class="w-full bg-[#39FF14] text-black text-[10px] font-bold py-2 rounded-lg">50 ‚≠ê</button>
            </div>
            <div class="glass p-4 rounded-2xl text-center border border-white/10">
                <div id="case-2-icon" class="text-4xl mb-2 text-white">üíé</div>
                <div class="text-[10px] font-bold mb-2">ELITE BOX</div>
                <button onclick="openCase(200, 'case-2')" class="w-full bg-[#39FF14] text-black text-[10px] font-bold py-2 rounded-lg">200 ‚≠ê</button>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let balance = 1000;
        let multiplier = 1.0;
        let bet = 0;
        let isMoving = false;
        let points = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        setTimeout(() => {
            document.getElementById('splash').remove();
            document.getElementById('lang-page').classList.add('active');
        }, 3000);

        function init(l) {
            document.getElementById('lang-page').remove();
            document.getElementById('main-app').classList.add('active');
            if(tg.initDataUnsafe?.user) document.getElementById('user-name').innerText = tg.initDataUnsafe.user.first_name.toUpperCase();
            startEngine();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞
        function updateBal() { document.getElementById('balance').innerText = Math.floor(balance); }

        // –õ–æ–≥–∏–∫–∞ –ö–ï–ô–°–û–í
        function openCase(cost, id) {
            if (balance < cost) return alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚≠ê");
            balance -= cost;
            updateBal();
            
            const icon = document.getElementById(id + '-icon');
            icon.classList.add('anim-spin');
            
            setTimeout(() => {
                icon.classList.remove('anim-spin');
                const win = Math.floor(Math.random() * (cost * 2.5));
                balance += win;
                updateBal();
                tg.showPopup({ message: `–í—ã –≤—ã–±–∏–ª–∏: ${win} ‚≠ê` });
                tg.HapticFeedback.notificationOccurred('success');
            }, 1500);
        }

        // –õ–æ–≥–∏–∫–∞ –ö–†–ê–®–ê
        function startBet() {
            const val = parseInt(document.getElementById('bet-input').value);
            if(val > balance || val <= 0) return;
            balance -= val;
            bet = val;
            updateBal();
            document.getElementById('btn-bet').classList.add('hidden');
            document.getElementById('btn-cash').classList.remove('hidden');
            tg.HapticFeedback.impactOccurred('medium');
        }

        function takeWin() {
            if(bet <= 0) return;
            const prize = bet * multiplier;
            balance += prize;
            updateBal();
            bet = 0;
            document.getElementById('btn-bet').classList.remove('hidden');
            document.getElementById('btn-cash').classList.add('hidden');
            tg.HapticFeedback.notificationOccurred('success');
        }

        function startEngine() {
            const canvas = document.getElementById('crash-canvas');
            const ctx = canvas.getContext('2d');
            
            setInterval(() => {
                ctx.clearRect(0,0, canvas.width, canvas.height);
                multiplier += 0.01;
                
                if(Math.random() < 0.005) { // –®–∞–Ω—Å –∫—Ä–∞—à–∞
                    if(bet > 0) {
                        bet = 0;
                        document.getElementById('btn-bet').classList.remove('hidden');
                        document.getElementById('btn-cash').classList.add('hidden');
                        tg.HapticFeedback.notificationOccurred('error');
                    }
                    multiplier = 1.0;
                    points = [];
                }

                points.push(multiplier);
                if(points.length > 50) points.shift();

                ctx.strokeStyle = '#39FF14';
                ctx.lineWidth = 3;
                ctx.beginPath();
                points.forEach((p, i) => {
                    ctx.lineTo((i/50)*canvas.width, canvas.height - (p*15));
                });
                ctx.stroke();
                document.getElementById('mult').innerText = multiplier.toFixed(2) + 'x';
            }, 50);
        }
    </script>
</body>
</html>
