<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Gaming TMA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;700&display=swap');
        :root { --neon: #39FF14; --gold: #FFD700; --dark: #050505; }
        body { background: var(--dark); color: white; font-family: 'Inter', sans-serif; overflow: hidden; height: 100vh; margin: 0; }
        .neon-text { font-family: 'Orbitron', sans-serif; color: var(--neon); text-shadow: 0 0 10px rgba(57, 255, 20, 0.5); }
        .neon-btn { background: var(--neon); color: black; font-weight: bold; border-radius: 12px; transition: all 0.2s; }
        .neon-btn:disabled { background: #1a1a1a; color: #444; box-shadow: none; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .tab-content { display: none; height: calc(100vh - 170px); overflow-y: auto; padding: 20px; }
        .tab-content.active { display: block; }

        /* –†—É–ª–µ—Ç–∫–∞ */
        .roulette-container { position: relative; width: 100%; height: 130px; background: #000; border-radius: 20px; overflow: hidden; border: 1px solid #222; }
        .roulette-track { display: flex; position: absolute; left: 0; align-items: center; height: 100%; will-change: transform; }
        .roulette-item { min-width: 90px; height: 110px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #111; margin: 0 5px; border-radius: 15px; border: 1px solid #222; }
        .gold-border { border: 2px solid var(--gold) !important; box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.3); }
        .roulette-marker { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: var(--neon); z-index: 10; transform: translateX(-50%); box-shadow: 0 0 15px var(--neon); }
        
        /* –†–∞–∫–µ—Ç–∞ */
        #rocket { position: absolute; font-size: 2.5rem; z-index: 5; pointer-events: none; filter: drop-shadow(0 0 10px var(--neon)); transition: opacity 0.3s; }
    </style>
</head>
<body>

    <header class="p-4 flex justify-between items-center border-b border-gray-900 bg-black/50">
        <div>
            <p class="text-[10px] text-gray-500 uppercase font-bold tracking-widest">–ë–∞–ª–∞–Ω—Å</p>
            <div class="flex items-center gap-2">
                <span class="text-2xl font-black neon-text" id="balanceDisplay">10.00</span>
                <span class="text-sm">‚≠ê</span>
            </div>
        </div>
        <div class="flex items-center gap-2 glass px-3 py-1 rounded-full text-[10px] font-bold">
            <span class="text-[#39FF14] animate-pulse">‚óè</span> LIVE
        </div>
    </header>

    <main>
        <section id="page-crash" class="tab-content active">
            <div class="bg-[#080808] rounded-[2rem] p-4 border border-gray-900 mb-6 h-64 relative overflow-hidden flex flex-col items-center justify-center">
                <div id="rocket" style="bottom: 10%; left: 10%; opacity: 0;">üöÄ</div>
                <div id="mult-display" class="text-6xl font-black neon-text z-10">1.00x</div>
                <div id="game-status" class="text-[10px] text-gray-500 uppercase mt-2 font-bold tracking-widest">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
                <div id="timer-bar" class="absolute bottom-0 left-0 h-1 bg-[#39FF14] w-0"></div>
            </div>

            <div class="glass rounded-3xl p-6">
                <p class="text-[10px] text-gray-500 mb-2 uppercase font-bold">–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞</p>
                <div class="flex gap-3">
                    <input id="betInput" type="number" value="1.0" class="bg-black border border-gray-800 rounded-xl flex-grow p-4 text-center font-bold outline-none focus:border-[#39FF14]">
                    <button onclick="handleBetClick()" id="crashBtn" class="w-1/2 neon-btn uppercase text-sm shadow-lg shadow-green-900/20">–°—Ç–∞–≤–∫–∞</button>
                </div>
            </div>
        </section>

        <section id="page-cases" class="tab-content">
            <h2 class="text-xl font-black mb-4 uppercase text-center neon-text">Mystery Box</h2>
            <div class="roulette-container mb-6">
                <div class="roulette-marker"></div>
                <div id="rouletteTrack" class="roulette-track" style="transition: transform 4s cubic-bezier(0.15, 0, 0.05, 1);"></div>
            </div>

            <div class="bg-gradient-to-b from-gray-900 to-black p-6 rounded-[2rem] border border-gray-800 text-center">
                <p class="text-gray-400 text-xs mb-1">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏—è</p>
                <p class="text-xl font-bold mb-4">5.00 ‚≠ê</p>
                <button onclick="openCase()" id="caseBtn" class="w-full py-4 neon-btn uppercase tracking-widest">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å</button>
            </div>
        </section>

        <section id="page-profile" class="tab-content text-center">
            <div class="w-24 h-24 bg-gray-900 rounded-full mx-auto mb-4 border-2 border-[#39FF14] flex items-center justify-center text-4xl">ü§¥</div>
            <h2 class="text-xl font-bold uppercase tracking-widest">Player One</h2>
            <p class="text-[#39FF14] text-xs">VIP –°—Ç–∞—Ç—É—Å</p>
            <div class="mt-10 grid grid-cols-2 gap-4">
                <div class="glass p-5 rounded-2xl border-b-2 border-green-500"><p class="text-xs text-gray-500 uppercase">–ò–≥—Ä</p><p class="text-xl font-bold">48</p></div>
                <div class="glass p-5 rounded-2xl border-b-2 border-yellow-500"><p class="text-xs text-gray-500 uppercase">–†–µ–∫–æ—Ä–¥</p><p class="text-xl font-bold">12.5x</p></div>
            </div>
        </section>
    </main>

    <nav class="fixed bottom-6 left-6 right-6 h-18 glass rounded-[2rem] flex justify-around items-center border border-white/10 z-50 p-2">
        <button onclick="nav('crash')" class="p-3">üìà</button>
        <button onclick="nav('cases')" class="p-3">üéÅ</button>
        <button onclick="nav('profile')" class="p-3">üë§</button>
    </nav>

    <script>
        // --- –î–ê–ù–ù–´–ï ---
        let balance = 10.0;
        let game = { state: 'waiting', mult: 1.0, crashAt: 0, myBet: 0, cashedOut: false };
        const casePrizes = [
            { s: '‚≠ê', n: '2 –∑–≤–µ–∑–¥—ã', v: 2.0, w: 0.85, gold: false },
            { s: 'üß∏', n: '15 –∑–≤–µ–∑–¥', v: 15.0, w: 0.08, gold: false },
            { s: 'üíñ', n: '15 –∑–≤–µ–∑–¥', v: 15.0, w: 0.05, gold: true },
            { s: 'üåπ', n: '25 –∑–≤–µ–∑–¥', v: 25.0, w: 0.02, gold: false }
        ];

        // --- –ö–†–ê–® –õ–û–ì–ò–ö–ê ---
        function runCrashCycle() {
            game.state = 'waiting';
            game.cashedOut = false;
            game.mult = 1.0;
            
            let timer = 5000;
            const bar = document.getElementById('timer-bar');
            bar.style.width = '100%';
            bar.style.transition = 'width 5s linear';
            document.getElementById('game-status').innerText = '–°—Ç–∞—Ä—Ç —á–µ—Ä–µ–∑ 5.0—Å';
            document.getElementById('rocket').style.opacity = '0';
            document.getElementById('mult-display').classList.remove('text-red-600', 'text-[#39FF14]');

            setTimeout(() => {
                bar.style.transition = 'none';
                bar.style.width = '0%';
                launchRocket();
            }, 5000);
        }

        function launchRocket() {
            game.state = 'flying';
            // –ê–ª–≥–æ—Ä–∏—Ç–º –≤—ã–≥–æ–¥—ã (RTP)
            let r = Math.random();
            game.crashAt = r < 0.35 ? 1.0 + Math.random()*0.2 : (r < 0.9 ? 1.2 + Math.random()*0.8 : 2.0 + Math.random()*4);
            
            document.getElementById('game-status').innerText = '–í –ü–û–õ–ï–¢–ï';
            const rocket = document.getElementById('rocket');
            rocket.style.opacity = '1';

            const interval = setInterval(() => {
                if (game.state !== 'flying') { clearInterval(interval); return; }
                
                game.mult += 0.02;
                document.getElementById('mult-display').innerText = game.mult.toFixed(2) + 'x';
                
                // –î–≤–∏–∂–µ–Ω–∏–µ —Ä–∞–∫–µ—Ç—ã
                let pos = Math.min(75, game.mult * 8);
                rocket.style.bottom = (10 + pos/2) + '%';
                rocket.style.left = (10 + pos) + '%';

                if (game.mult >= game.crashAt) {
                    game.state = 'crashed';
                    document.getElementById('mult-display').innerText = 'CRASH';
                    document.getElementById('mult-display').classList.add('text-red-600');
                    rocket.style.opacity = '0';
                    game.myBet = 0;
                    updateUI();
                    setTimeout(runCrashCycle, 3000);
                    clearInterval(interval);
                }
            }, 60);
        }

        function handleBetClick() {
            const amt = parseFloat(document.getElementById('betInput').value);
            if (game.state === 'waiting' && game.myBet === 0) {
                if (amt > balance) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥!');
                balance -= amt;
                game.myBet = amt;
                updateUI();
            } else if (game.state === 'flying' && game.myBet > 0 && !game.cashedOut) {
                let win = game.myBet * game.mult;
                balance += win;
                game.cashedOut = true;
                document.getElementById('mult-display').classList.add('text-[#39FF14]');
                alert('–í—ã–∏–≥—Ä—ã—à: ' + win.toFixed(2) + ' ‚≠ê');
                updateUI();
            }
        }

        // --- –ö–ï–ô–° –õ–û–ì–ò–ö–ê ---
        function createItem(itemData) {
            const div = document.createElement('div');
            div.className = `roulette-item ${itemData.gold ? 'gold-border' : ''}`;
            div.innerHTML = `
                <span class="text-3xl">${itemData.s}</span>
                <span class="text-[8px] mt-2 font-bold uppercase text-gray-400">${itemData.n}</span>
            `;
            return div;
        }

        function initRoulette() {
            const track = document.getElementById('rouletteTrack');
            track.innerHTML = '';
            for(let i=0; i<60; i++) {
                let r = Math.random();
                let prize = casePrizes[0];
                if(r < 0.02) prize = casePrizes[3];
                else if(r < 0.07) prize = casePrizes[2];
                else if(r < 0.15) prize = casePrizes[1];
                track.appendChild(createItem(prize));
            }
        }

        function openCase() {
            if(balance < 5) return alert('–ù—É–∂–Ω–æ 5.00 ‚≠ê');
            balance -= 5;
            updateUI();
            
            const btn = document.getElementById('caseBtn');
            btn.disabled = true;
            
            const track = document.getElementById('rouletteTrack');
            let targetIdx = 45 + Math.floor(Math.random() * 5);
            
            // –ù–∞—à–∞ –≤—ã–≥–æ–¥–∞: –≤ 90% —Å–ª—É—á–∞–µ–≤ –≤—ã–∏–≥—Ä—ã—à - –∑–≤–µ–∑–¥–∞ (2 –∑–≤–µ–∑–¥—ã)
            let finalWin = Math.random() > 0.1 ? casePrizes[0] : casePrizes[Math.floor(Math.random()*3)];
            
            // –ó–∞–º–µ–Ω—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –≤ —Ä—É–ª–µ—Ç–∫–µ
            track.children[targetIdx].replaceWith(createItem(finalWin));

            const offset = (targetIdx * 100) - (track.parentElement.offsetWidth / 2) + 50;
            track.style.transition = 'transform 4s cubic-bezier(0.15, 0, 0.05, 1)';
            track.style.transform = `translateX(-${offset}px)`;

            setTimeout(() => {
                balance += finalWin.v;
                updateUI();
                alert(`–í–∞–º –≤—ã–ø–∞–ª–æ: ${finalWin.s} (${finalWin.n})`);
                btn.disabled = false;
                // –°–±—Ä–æ—Å —Ä—É–ª–µ—Ç–∫–∏
                setTimeout(() => {
                    track.style.transition = 'none';
                    track.style.transform = 'translateX(0)';
                    initRoulette();
                }, 1000);
            }, 4500);
        }

        // --- –°–ò–°–¢–ï–ú–ù–û–ï ---
        function updateUI() {
            document.getElementById('balanceDisplay').innerText = balance.toFixed(2);
            const btn = document.getElementById('crashBtn');
            if (game.state === 'waiting') {
                btn.innerText = game.myBet > 0 ? '–ñ–î–ï–ú...' : '–°–¢–ê–í–ö–ê';
                btn.className = game.myBet > 0 ? 'w-1/2 bg-gray-800 rounded-xl uppercase text-sm' : 'w-1/2 neon-btn uppercase text-sm';
            } else if (game.state === 'flying') {
                if (game.myBet > 0 && !game.cashedOut) {
                    btn.innerText = '–ó–ê–ë–†–ê–¢–¨';
                    btn.className = 'w-1/2 bg-white text-black font-bold rounded-xl uppercase text-sm';
                } else {
                    btn.innerText = '–ü–û–õ–ï–¢...';
                    btn.className = 'w-1/2 bg-gray-800 rounded-xl uppercase text-sm';
                }
            } else {
                btn.innerText = '–ö–†–ê–®!';
                btn.className = 'w-1/2 bg-red-900 rounded-xl uppercase text-sm';
            }
        }

        function nav(p) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById('page-'+p).classList.add('active');
        }

        window.onload = () => {
            initRoulette();
            runCrashCycle();
        };
    </script>
</body>
</html>
